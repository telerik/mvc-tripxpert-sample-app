@{
    ViewBag.Title = "Destinations";
}

<h2>Available Destinations</h2>

@(Html.Kendo().ListView<TripXpert.Models.DestinationViewModel>()
            .Name("listView")
            .TagName("div")
            .ClientTemplateId("bootstrap-card-template")
            .DataSource(dataSource =>
            {
                dataSource.Read(read => read.Action("Destinations_Read", "Destinations").Data("getIds"));
                dataSource.PageSize(21);
            })
)

<script>
    function getRating(rating) {
        var count = Math.floor(rating);
        var result = "";
        for (var i = 0; i < count; i++) {
            result += "<span class='k-icon k-i-star'></span>";
        }
        return result;
    }

    function getIds() {
        var urlParams = getQueryString("Ids");
        var idList;

        if (urlParams) {
            idList = urlParams.split(",").map(Number);
        }
        
        return { ids: idList };
    }

    var getQueryString = function (field, url) {
        var href = url ? url : window.location.href;
        var reg = new RegExp('[?&]' + field + '=([^&#]*)', 'i');
        var string = reg.exec(href);
        return string ? string[1] : null;
    };
</script>


<style>
    #listView .card .image-container {
        height: 60%;
        background-size: cover;
        background-size: contain;
        background-repeat: no-repeat;
    }
</style>